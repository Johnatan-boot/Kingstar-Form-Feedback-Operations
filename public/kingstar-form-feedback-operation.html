<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Intelig√™ncia Operacional - King Star</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

body{
background-color: #FFFFFF;    
color:#fff;
display:flex;
justify-content:center;
padding:30px;
}

.container{
width:100%;
max-width:900px;
background:#FFFFFF;
padding:40px;
border-radius:15px;
box-shadow:0 0 30px rgba(172, 171, 171, 0.3);
animation:fade 0.6s ease-in-out;
}

.logo img{
    max-width: 250px;   /* tamanho m√°ximo da logo */
    width: 100%;        /* adapta ao container */
    height: auto;       /* mant√©m propor√ß√£o */
    display: block;
    margin: 0 auto;
}

 h1{
color:goldenrod;
font-weight:700;
}

h1{
text-align:center;
margin-bottom:30px;
}


.progress{
    height:20px;
    background:#e0e0e0;
    border-radius:10px;
    margin-bottom:25px;
    overflow:hidden;
}

.progress-bar{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#ff1e1e,#ff9900);
    transition:width 0.4s ease;
}

label{
color: darkblue;    
display:block;
margin-top:15px;
font-size:14px;
}

input,select,textarea{
width:100%;
padding:10px;
margin-top:5px;
border:none;
border-radius:8px;
background:#dddddd;
color:#000;
}

textarea{height:80px;resize:none;}

button{
margin-top:20px;
padding:12px;
width:100%;
border:none;
border-radius:10px;
background:#ff1e1e;
color:#fff;
font-weight:600;
cursor:pointer;
transition:0.3s;
}

button:hover{background:#cc0000;}

.actions{
display:flex;
gap:10px;
}

.actions button{
flex:1;
}

@keyframes fade{
from{opacity:0;transform:translateY(10px);}
to{opacity:1;transform:translateY(0);}
}
</style>
</head>

<body>

<div class="container">

<div class="logo">
<img src="./assets/logokingstar.gif" alt="King Star">
</div>

<h1>Intelig√™ncia Operacional Empresarial</h1>

<div class="progress">
<div class="progress-bar" id="progressBar"></div>
</div>

<form id="form">

<!-- IDENTIFICA√á√ÉO -->
<div class="section">
<label>Nome Completo</label>
<input type="text" required>

<label>Departamento</label>
<select id="departamento" required>
<option value="">Selecione</option>
<option value="logistica">Log√≠stica</option>
<option value="varejo">Vendas / Loja</option>
<option value="rh">RH</option>
<option value="financeiro">Financeiro</option>
<option value="ti">TI</option>
<option value="qualidade">Qualidade</option>
</select>

<label>Cargo</label>
<input type="text" required>

<label>Tempo na Fun√ß√£o</label>
<input type="text">
</div>

<!-- PROCESSOS -->
<div class="section">
<label>Explique resumidamente como funciona o processo do seu setor</label>
<textarea></textarea>

<label>Onde ocorrem mais erros ou retrabalhos?</label>
<textarea></textarea>

<label>Existe desperd√≠cio de tempo ou material?</label>
<textarea></textarea>
</div>

<!-- LOG√çSTICA -->
<div class="section hidden" id="logistica">
<label>Tempo m√©dio entre pedido e entrega?</label>
<input type="text">

<label>Problemas com transportadora?</label>
<textarea></textarea>

<label>Como est√° o controle de estoque?</label>
<textarea></textarea>
</div>

<!-- VAREJO -->
<div class="section hidden" id="varejo">
<label>Equipe demonstra empatia no atendimento?</label>
<textarea></textarea>

<label>Existem promessas n√£o cumpridas ao cliente?</label>
<textarea></textarea>

<label>Principais reclama√ß√µes?</label>
<textarea></textarea>
</div>

<!-- RH -->
<div class="section hidden" id="rh">
<label>Equipe est√° bem treinada?</label>
<textarea></textarea>

<label>Existe clareza nas fun√ß√µes?</label>
<textarea></textarea>
</div>

<!-- FINANCEIRO -->
<div class="section hidden" id="financeiro">
<label>Existem atrasos em pagamentos?</label>
<textarea></textarea>

<label>Controle de fluxo est√° eficiente?</label>
<textarea></textarea>
</div>

<!-- TI -->
<div class="section hidden" id="ti">
<label>Sistemas atendem bem as demandas?</label>
<textarea></textarea>

<label>ERP integra setores corretamente?</label>
<textarea></textarea>
</div>

<!-- QUALIDADE -->
<div class="section hidden" id="qualidade">
<label>Produtos seguem padr√£o t√©cnico?</label>
<textarea></textarea>

<label>Assist√™ncia t√©cnica tem alto volume?</label>
<textarea></textarea>
</div>

<!-- ESTRAT√âGICO FINAL -->
<div class="section">
<label>Cite 1 problema grave da empresa</label>
<textarea></textarea>

<label>Sua solu√ß√£o pr√°tica para esse problema</label>
<textarea></textarea>

<label>Nota de 0 a 10 para efici√™ncia operacional</label>
<input type="number" min="0" max="10">
</div>

<button class="btn btn-dark" type="submit">Enviar Feedback Estrat√©gico</button>

</form>

<!-- TOAST CONTAINER -->
<div class="toast-container position-fixed top-0 end-0 p-3">

  <div id="toastSucesso" class="toast align-items-center text-bg-success border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">
        ‚úÖ Feedback enviado com sucesso!
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>

  <div id="toastErro" class="toast align-items-center text-bg-danger border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">
        ‚ùå Erro ao salvar feedback.
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>

</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script>
const form = document.getElementById("form");
const progressBar = document.getElementById("progressBar");
const inputs = document.querySelectorAll("#form input, #form textarea, #form select");

// üîµ Fun√ß√£o que calcula progresso
function atualizarProgresso(){
    let preenchidos = 0;

    inputs.forEach(input => {
        if(input.value.trim() !== ""){
            preenchidos++;
        }
    });

    const percentual = (preenchidos / inputs.length) * 100;
    progressBar.style.width = percentual + "%";
}

// üîµ Atualiza barra enquanto digita
inputs.forEach(input => {
    input.addEventListener("input", atualizarProgresso);
});

// üî¥ Envio do formul√°rio
/*form.addEventListener("submit", async function(e){
    e.preventDefault();

    const dados = {
        nome: document.querySelectorAll("input[type='text']")[0].value,
        departamento: document.getElementById("departamento").value,
        cargo: document.querySelectorAll("input[type='text']")[1].value,
        tempoFuncao: document.querySelectorAll("input[type='text']")[2].value,
        processo: document.querySelectorAll("textarea")[0].value,
        problemas: document.querySelectorAll("textarea")[1].value,
        melhorias: document.querySelectorAll("textarea")[2].value,
        nota: document.querySelector("input[type='number']").value
    };

    try {
        const resposta = await fetch("/salvar-feedback", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(dados)
        });

        const resultado = await resposta.json();
         mostrarToast("sucesso");
        // ‚úÖ Limpa formul√°rio
        form.reset();

        // ‚úÖ Atualiza barra (vai automaticamente para 0%)
        atualizarProgresso();

    } catch (erro) {
      mostrarToast("erro");        
      console.error(erro);
    }
});*/

function mostrarToast(tipo){

    let toastEl;

    if(tipo === "sucesso"){
        toastEl = document.getElementById("toastSucesso");
    }

    if(tipo === "erro"){
        toastEl = document.getElementById("toastErro");
    }

    const toast = new bootstrap.Toast(toastEl, {
        delay: 4000
    });

    toast.show();
}
</script>
<script>
document.getElementById("form").addEventListener("submit", async function(e){
    e.preventDefault();

    const dados = {
        nome: document.querySelector("input[type='text']").value,
        departamento: document.getElementById("departamento").value,
        cargo: document.querySelectorAll("input[type='text']")[1].value,
        tempoFuncao: document.querySelectorAll("input[type='text']")[2].value,
        processo: document.querySelectorAll("textarea")[0].value,
        problemas: document.querySelectorAll("textarea")[1].value,
        melhorias: document.querySelectorAll("textarea")[2].value,
        nota: document.querySelector("input[type='number']").value
    };

    try {
        const resposta = await fetch("/salvar-feedback", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(dados)
        });

        const resultado = await resposta.json();
         mostrarToast("sucesso");

        document.getElementById("form").reset();

    } catch (erro) {
         mostrarToast("erro");        
        console.error(erro);
    }
});
</script>

</body>
</h